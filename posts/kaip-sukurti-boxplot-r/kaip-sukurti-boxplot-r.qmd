---
title: "Kaip sukurti boxplot su R? 4 bÅ«dai"
description: "StaÄiakampÄ— diagrama (boxplot) yra vienas populiariausiÅ³ bÅ«dÅ³ vizualizuoti duomenÅ³ pasiskirstymÄ…. Å iame straipsnyje parodysiu, kaip sukurti boxplot naudojant base R, ggplot2, tidyplots ir ggpubr paketus."
date: "2026-02-08"
author: "Paulius Alaburda"
categories: [R, vizualizacija, ggplot2, tidyplots]
image: kaip-sukurti-boxplot-r_files/figure-html/preview-plot-1.png
editor: source
toc: true
execute:
  warning: false
  message: false
---

# Kas yra staÄiakampÄ— diagrama (boxplot)?

StaÄiakampÄ— diagrama, arba *boxplot*, yra vienas iÅ¡ daÅ¾niausiai naudojamÅ³ grafikÅ³ moksliniuose darbuose. Ji parodo duomenÅ³ pasiskirstymÄ… kompaktiÅ¡kai: medianÄ…, kvartiles, ekstremumus ir galimus iÅ¡skirtis (*outliers*). Boxplot ypaÄ naudingas, kai norime palyginti kelis pogrupius.

Å iame straipsnyje parodysiu **4 skirtingus bÅ«dus**, kaip sukurti boxplot su R:

1. **Base R** â€“ be jokiÅ³ papildomÅ³ paketÅ³
2. **ggplot2** â€“ populiariausias vizualizacijos paketas
3. **tidyplots** â€“ naujas paketas, skirtas mokslinÄ—ms publikacijoms
4. **ggpubr** â€“ ggplot2 plÄ—tinys su statistiniais palyginimais

Visiems pavyzdÅ¾iams naudosime `iris` duomenÅ³ rinkinÄ¯, kuris yra Ä¯trauktas Ä¯ R.

```{r}
#| label: preview-plot
#| echo: false
#| fig-height: 5

library(ggplot2)

ggplot(iris, aes(x = Species, y = Sepal.Length, fill = Species)) +
  geom_boxplot(alpha = 0.8) +
  scale_fill_manual(values = c("#4F46E5", "#f97316", "#22c55e")) +
  labs(
    title = "TaurÄ—lapiÅ³ ilgis pagal vilkdalgiÅ³ rÅ«Å¡Ä¯",
    x = "RÅ«Å¡is",
    y = "TaurÄ—lapio ilgis (cm)"
  ) +
  theme_minimal(base_size = 14) +
  theme(legend.position = "none",
        plot.title = element_text(face = "bold"))
```

# 1. Base R

PaprasÄiausias bÅ«das â€“ naudoti `boxplot()` funkcijÄ…, kuri yra Ä¯traukta Ä¯ base R. Nereikia jokiÅ³ papildomÅ³ paketÅ³:

```{r}
#| fig-height: 5

boxplot(Sepal.Length ~ Species,
        data = iris,
        main = "TaurÄ—lapiÅ³ ilgis pagal rÅ«Å¡Ä¯",
        xlab = "RÅ«Å¡is",
        ylab = "TaurÄ—lapio ilgis (cm)",
        col = c("#4F46E5", "#f97316", "#22c55e"))
```

::: {.callout-tip}
## Kada naudoti base R?
Base R boxplot yra greiÄiausias bÅ«das perÅ¾iÅ«rÄ—ti duomenis eksploracijoje. TaÄiau jei ruoÅ¡iate grafikÄ… publikacijai, rekomenduoju naudoti `ggplot2` arba `tidyplots`.
:::

**Privalumai:**

- Nereikia papildomÅ³ paketÅ³
- Greita ir paprasta
- Tinka eksploracijai

**TrÅ«kumai:**

- Ribotos pritaikymo galimybÄ—s
- SudÄ—tinga keisti stiliÅ³
- Netinka publikacijoms

# 2. ggplot2

`ggplot2` yra populiariausias R vizualizacijos paketas. Jis leidÅ¾ia kurti graÅ¾ius ir profesionalius grafikus naudojant â€gramatikos" principÄ… â€“ grafikas kuriamas sluoksnis po sluoksnio:

```{r}
#| fig-height: 5

library(ggplot2)

ggplot(iris, aes(x = Species, y = Sepal.Length, fill = Species)) +
  geom_boxplot(alpha = 0.8, outlier.shape = 21) +
  scale_fill_manual(values = c("#4F46E5", "#f97316", "#22c55e")) +
  labs(
    title = "TaurÄ—lapiÅ³ ilgis pagal vilkdalgiÅ³ rÅ«Å¡Ä¯",
    x = "RÅ«Å¡is",
    y = "TaurÄ—lapio ilgis (cm)"
  ) +
  theme_minimal(base_size = 13) +
  theme(legend.position = "none")
```

Galime pridÄ—ti ir duomenÅ³ taÅ¡kus, kad matytume kiekvieno stebÄ—jimo reikÅ¡mÄ™:

```{r}
#| fig-height: 5

ggplot(iris, aes(x = Species, y = Sepal.Length, fill = Species)) +
  geom_boxplot(alpha = 0.6, outlier.shape = NA) +
  geom_jitter(aes(color = Species), width = 0.2, alpha = 0.5, size = 1.5) +
  scale_fill_manual(values = c("#4F46E5", "#f97316", "#22c55e")) +
  scale_color_manual(values = c("#4F46E5", "#f97316", "#22c55e")) +
  labs(
    title = "Boxplot su atskirais duomenÅ³ taÅ¡kais",
    x = "RÅ«Å¡is",
    y = "TaurÄ—lapio ilgis (cm)"
  ) +
  theme_minimal(base_size = 13) +
  theme(legend.position = "none")
```

::: {.callout-note}
## Patarimas
Kai pridedate taÅ¡kus su `geom_jitter()`, nustatykite `outlier.shape = NA` `geom_boxplot()` viduje, kad outlieriai nebÅ«tÅ³ pavaizduoti du kartus.
:::

**Privalumai:**

- Labai lankstus ir galingas
- Platus bendruomenÄ—s palaikymas
- Galima pridÄ—ti daugybÄ™ sluoksniÅ³

**TrÅ«kumai:**

- Reikia daugiau kodo nei base R
- Pradedantiesiems gali bÅ«ti sudÄ—tinga sintaksÄ—

# 3. tidyplots

[`tidyplots`](https://jbengler.github.io/tidyplots/) yra naujas paketas, sukurtas specialiai mokslinÄ—ms publikacijoms. Jo sintaksÄ— yra labai intuityvi â€“ naudojamas *pipe* operatorius `|>`, o funkcijos pradedamos nuo `add_`, `adjust_`, `remove_`:

```{r}
#| fig-height: 5

library(tidyplots)

iris |>
  tidyplot(x = Species, y = Sepal.Length, color = Species) |>
  add_boxplot() |>
  add_data_points_beeswarm(alpha = 0.4) |>
  adjust_colors(new_colors = c("#4F46E5", "#f97316", "#22c55e")) |>
  adjust_title("TaurÄ—lapiÅ³ ilgis pagal rÅ«Å¡Ä¯") |>
  adjust_x_axis_title("RÅ«Å¡is") |>
  adjust_y_axis_title("TaurÄ—lapio ilgis (cm)")
```

`tidyplots` taip pat leidÅ¾ia labai paprastai kontroliuoti grafiko dydÄ¯, kas yra ypaÄ naudinga rengiant publikacijas:

```{r}
#| fig-height: 5

iris |>
  tidyplot(x = Species, y = Sepal.Length, color = Species) |>
  add_boxplot() |>
  add_data_points_beeswarm(alpha = 0.4) |>
  adjust_colors(new_colors = c("#4F46E5", "#f97316", "#22c55e")) |>
  adjust_title("Minimalus stilius") |>
  adjust_x_axis_title("RÅ«Å¡is") |>
  adjust_y_axis_title("Ilgis (cm)") |>
  remove_legend()
```

::: {.callout-tip}
## KodÄ—l verta iÅ¡bandyti tidyplots?
`tidyplots` yra ypaÄ naudingas, kai reikia greitai sukurti publikacijai tinkamÄ… grafikÄ… su pastovia ir tvarkinga sintakse. Jei jau naudojate `|>` operatoriÅ³ su `dplyr`, `tidyplots` sintaksÄ— bus labai paÅ¾Ä¯stama.
:::

**Privalumai:**

- Intuityvi, konvejerinÄ— (pipe-based) sintaksÄ—
- Automatinis dydÅ¾io valdymas publikacijoms
- Lengva derinti su statistiniais testais

**TrÅ«kumai:**

- Naujesnis paketas, maÅ¾iau iÅ¡tekliÅ³ internete
- MaÅ¾iau pritaikymo galimybiÅ³ nei `ggplot2`

# 4. ggpubr

[`ggpubr`](https://rpkgs.datanovia.com/ggpubr/) yra `ggplot2` plÄ—tinys, kuris supaprastina grafikÅ³ kÅ«rimÄ… ir prideda galimybÄ™ tiesiogiai grafikuose rodyti statistinius palyginimus:

```{r}
#| fig-height: 5

library(ggpubr)

ggboxplot(iris,
          x = "Species",
          y = "Sepal.Length",
          fill = "Species",
          palette = c("#4F46E5", "#f97316", "#22c55e"),
          add = "jitter",
          title = "Boxplot su statistiniais palyginimais",
          xlab = "RÅ«Å¡is",
          ylab = "TaurÄ—lapio ilgis (cm)") +
  stat_compare_means(method = "anova", label.y = 8.5) +
  stat_compare_means(
    comparisons = list(c("setosa", "versicolor"),
                       c("versicolor", "virginica"),
                       c("setosa", "virginica")),
    method = "t.test",
    label = "p.signif"
  )
```

::: {.callout-note}
## Statistiniai palyginimai grafike
`ggpubr` leidÅ¾ia tiesiogiai grafike pridÄ—ti p-reikÅ¡mes tarp grupiÅ³ naudojant `stat_compare_means()`. Tai labai patogu rengiant straipsnius, kur reikia vizualiai parodyti statistinius skirtumus.
:::

**Privalumai:**

- Paprasta sintaksÄ—
- Integruoti statistiniai palyginimai
- Lengva pridÄ—ti p-reikÅ¡mes Ä¯ grafikÄ…

**TrÅ«kumai:**

- MaÅ¾iau lankstus nei grynas `ggplot2`
- Ribotesnis stiliÅ³ pasirinkimas

# Palyginimas

| SavybÄ— | Base R | ggplot2 | tidyplots | ggpubr |
|---|---|---|---|---|
| **SudÄ—tingumas** | Å½emas | Vidutinis | Å½emas | Å½emas |
| **Lankstumas** | Ribotas | Labai didelis | Vidutinis | Vidutinis |
| **Publikacijoms** | âŒ | âœ… | âœ…âœ… | âœ… |
| **Statistiniai testai** | âŒ | Su papildomais paketais | âœ… | âœ…âœ… |
| **Mokymosi kreivÄ—** | Lengva | VidutinÄ— | Lengva | Lengva |

# IÅ¡vados

- **Eksploracijai** â€“ naudokite **base R** `boxplot()`, jei norite greitai perÅ¾iÅ«rÄ—ti duomenis.
- **Publikacijoms** â€“ naudokite **ggplot2** arba **tidyplots**, jei norite pilnai kontroliuoti grafiko iÅ¡vaizdÄ….
- **Su statistiniais palyginimais** â€“ naudokite **ggpubr**, jei norite grafike rodyti p-reikÅ¡mes.
- **Moksliniams straipsniams** â€“ **tidyplots** yra puikus pasirinkimas dÄ—l automatinio dydÅ¾io valdymo ir paprastos sintaksÄ—s.

Nepriklausomai nuo to, kurÄ¯ bÅ«dÄ… pasirinksite, svarbiausia, kad boxplot bÅ«tÅ³ aiÅ¡kus, informatyvus ir tinkamai pavaizduotÅ³ jÅ«sÅ³ duomenis. ğŸ¯
