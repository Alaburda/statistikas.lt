{"title":"Kaip naudoti Stjudento t-testą?","markdown":{"yaml":{"title":"Kaip naudoti Stjudento t-testą?","editor":"visual","execute":{"warning":false,"message":false},"toc":true},"headingText":"Kam skirtas t-testas?","containsRefs":false,"markdown":"\n\nPalyginti dviejų imčių vidurkius yra standartinė užduotis atliekant tyrimus, todėl Stjudento t-testas yra vienas dažniausių taikomų statistinių testų. Jeigu atliekate tyrimus, tikėtina, jog susidursite su duomenimis, kur t-testas bus tinkamas. Dėl to svarbu suprasti, kada taikyti testą, kaip jį interpretuoti bei kaip jį pateikti publikacijoje.\n\n\nStjudento t-testas yra skirtas palyginti dviejų grupių vidurkius tarpusavyje. Atlikdami testą savaime suformuluojame nulinę hipotezę, jog grupių vidurkiai nesiskiria, ir alternatyvią hipotezę, jog grupių vidurkiai skiriasi. Testas mums nieko nepasako apie priežastinius ryšius ir pasako, kiek tikėtinas mūsų stebimas skirtumas laikantis prielaidos, jog skirtumo tarp grupių nėra.\n\n![Iliustracija iš D. Navarro \"Learning Statistics with R\". Stjudento t-testas daro prielaidą, jog duomenys pasiskirstę pagal normalųjį skirstinį, todėl iliustracija vaizduoja tokį skirstinį. Dešinėje skirstiniai turi panašią formą, nes įprastas Stjudento t-testas daro prielaidą, jog imčių standartiniai nuokrypiai yra vienodi.](images/image-1458940830.png)\n\n# Kada rinktis t-testą?\n\nT-testą galima atlikti su tolydžiu kintamuoju, kurį galima padalinti į dvi grupes. Tolydų kintamąjį toliau vadinsime priklausomu kintamuoju, o savo grupių kintamąjį - nepriklausomu kintamuoju.\n\nPirma, priklausomas kintamasis turi būti tolydus, t.y. jis turi gebėti įgyti daug skirtingų reikšmių. Tinkami priklausomi kintamieji:\n\n-   **Matavimai, kurie gali įgyti be galo didelį kiekį reikšmių**: ūgis, svoris, amžius ir pan.\n\n-   **Proporcijos**: dalis skaidulų nerve, atsakymai tolydžioje skalėje, flourescuojančių ląstelių dalis regimajame lauke, respondentų atsakymai, kiek yra įsitikinę apie ką nors;\n\n-   **Ranginiai klausimai** su 7 ir daugiau kategorijų (Likert skalės);\n\nNetinkami kintamieji:\n\n-   **Ranginiai klausimai** su 5 ir mažiau kategorijų\n\n-   **2 kategorijų kintamieji (nebent esate ekonomistas ir taikome tiesinį tikimybinį modelį 🤪)**\n\n-   **Sudėtiniai skaičiai**, pavyzdžiui, ląstelių skaičius matymo lauke, euzinofilų skaičius kraujyje ir pan.\n\nRanginiai klausimai gali atrodyti negerai, bet t-testas yra pakankamai atsparus nuokrypiams nuo normalumo.\n\nAntra, priklausomas kintamasis, padalintas į 2 grupes, turi turėti panašią variaciją (t.y. standartinį nuokrypį) ir turi būti pasiskirstęs pagal normalųjų skirstinį. Variacijos testavimas dirbant su R nėra būtinas, nes R naudoja Welch t-testą, kuriam nesvarbi skirtinga variacija. Normalus yra svarbesnis - dauguma šaltinių siūlo tikrinti normalųjį skirstinį su Shapiro-Wilk arba Kolmogorov-Smirnov testais, bet [šie testai yra pernelyg jautrūs nuokrypiams nuo normalumo su didelėmis imtimis ir nepakankamai jautrūs nuokrypiams nuo normulamumo su mažomis imtimis](https://towardsdatascience.com/stop-testing-for-normality-dba96bb73f90). Įrodymą su simuliacijomis galima rasti [čia](https://stats.stackexchange.com/questions/2492/is-normality-testing-essentially-useless).\n\nVietoje formalių testų geriausias būdas įsitikinti, ar duomenys yra pasiskirstę pagal normalųjį skirstinį, yra su Kvantilių-kvantilių (QQ) grafiku arba histograma. Idealiame pasaulyje ieškome, jog QQ grafikas ir histograma atrodytų taip:\n\n```{r}\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(patchwork)\n\ntmp_data <- data.frame(sample_norm = rnorm(100))\n\np1 <- ggplot(tmp_data, aes(sample = sample_norm)) + stat_qq() + stat_qq_line(color = \"red\")\n\np2 <- ggplot(tmp_data, aes(x = sample_norm)) + geom_histogram(aes(y = ..density..)) + stat_function(\n\t\tfun = dnorm, color = \"red\",\n\t\targs = with(tmp_data, c(mean = mean(sample_norm), sd = sd(sample_norm)))\n\t)\n\np1 + p2\n\n\n```\n\nTaip galima susikurti reikalingus grafikus su R arba Excel:\n\n::: panel-tabset\n## R\n\n```{r}\n\nggplot(iris, aes(sample = Sepal.Length)) + stat_qq() + stat_qq_line(color = \"red\") + facet_wrap(~Species) + labs(title = \"3 vilkdalgių rūšių taurėlapių ilgio QQ grafikas\", subtitle = \"iris duomenų rinkinys; kuo arčiau linijos centre yra taškai, tuo geriau.\")\n```\n\n## Excel\n\nQQ grafiką galima nubraižyti su Excel, bet tai reikalautų per daug laiko ir geriau nubraižyti histogramą (pasirinkti duomenis, rinktis skiltį Insert ir pasirinkti histogramą iš Charts skilties):\n\n![](images/excel_histograma.gif)\n:::\n\nJeigu atrodo, jog duomenys neatitinka normaliojo skirstinio nei QQ grafike, nei histogramoje, reikėtų rinktis neparametrinius testus palyginti 2 grupes. Atrodo yra subjektyvus žodis, bet vertinant reikia atsakyti į klausimą: ar atrodo, jog imties mediana ir vidurkis yra panašioje vietoje? Ar mano kintamojo dažniausia reikšmė turėtų būti skirstinio viduryje, ar kur nors vienoje arba kitoje pusėje? Pavyzdžiui, prieš tai minėjome, jog proporcijų duomenys yra tinkami t-testui, bet jeigu dauguma proporcijų yra 0 arba arti 1, tuomet vargu, ar duomenys yra pasiskirstę pagal normalųjį skirstinį. Testo pasirinkimas yra mažiau priklausomas nuo formalių procedūrų, o daugiau nuo tyrimo dizaino ir tyrimo objekto.\n\n# Kaip atlikti t-testą?\n\n::: panel-tabset\n## R\n\nSu R atlikti t-testą nėra sudėtinga:\n\n-   Naudosime `t.test` funkciją\n\n-   į `data` parametrą reikia pateikti savo duomenų rinkinį\n\n-   Testui galima naudoti tildės sintaksę, kur kairėje yra priklausomas kintamasis, o dešinėje nepriklausomas kintamasis\n\n-   `subset` kintamasis leidžia pasirinkti, jog lygintume 2 grupes, kai nepriklausomas kintamasis turi 3 grupes. Jis yra būtinas tik tada, kai nepriklausomas kintamasis turi daugiau negu 2 kategorijas.\n\n```{r}\n\nt.test(data = iris, Sepal.Length ~ Species, subset = Species %in% c(\"setosa\",\"versicolor\"))\n\n```\n\n## Excel\n\n![](images/Recording%202023-04-16%20121928.gif)\n:::\n\n# Kaip interpretuoti t-testą?\n\nT-testas susideda iš 2 dalių. T-testo techninės dalis apima statistinę t-reikšmę (kokia yra reikšmė iš Stjudento t skirstinio atlikus mūsų grupių lyginimą), laisvės laipsnių skaičiaus ir p reikšmės (kokia yra tikimybė pamatyti tokį arba didesnį skirtumą, jeigu tarp grupių nebūtų skirtumo). Antroji dalis yra vidutiniai dydžiai grupėse bei šių grupių skirtumo pasikliautinasis intervalas.\n\nAbi dalys yra gana svarbios: techninė dalis padeda atlikti metaanalizes bei duoda išvadą, ar skirtumas statistiškai reikšmingas, o antroji dalis leidžia suprasti, koks realus skirtumas yra tarp grupių. Pasikliautinasis intervalas R pusėje yra ypač svarbus, nes vien p reikšmė negali pasakyti, ar skirtumas tarp grupių yra didelis, ar mažas.\n\n::: panel-tabset\n## R\n\n![](images/image-197069574.png)\n\n## Excel\n\n![](images/image-973213723.png)\n:::\n\n# Kaip raportuoti t-testą?\n\nStjudento t-testą grafiškai geriausia pavaizduoti su stačiakampe diagrama (ang. boxplot), o tekstas galėtų atrodyti taip:\n\n::: {.callout-note appearance=\"simple\" icon=\"false\"}\nAtlikus Stjudento t-testą, versicolor rūšies vilkdalgių taurėlapiai buvo vidutiniškai 0,93 cm ilgesni negu setosa rūšies, skirtumas buvo statistiškai reikšmingas (t = 10,52, CI 95% \\[0,75--1,11\\], p \\< 0,001).\n:::\n\nJeigu lygintume aukščiau buvusį rezultatą ir R, ir Excel, pastebėtume, jog nei vienas iš jų neraportuoja vidutinio skirtumo - jį turime suskaičiuoti patys. Grafiškai geriausia naudoti stačiakampę diagramą:\n\n::: panel-tabset\n## R\n\n```{r}\n\nlibrary(dplyr)\n\niris %>% \n  filter(Species %in% c(\"setosa\",\"versicolor\")) %>% \n  ggplot(aes(x = Species, y = Sepal.Length)) + geom_boxplot()\n\n\n```\n\n## Excel\n\n![](images/Recording%202023-04-16%20185240.gif)\n:::\n\n# Jeigu negaliu taikyti t-testo?\n\nJeigu Stjudento t-testas nėra tinkamas, tokiu atveju reikėtų taikyti Mann-Whitney U testą. Aprašą apie testą galima rasti [čia](../kada-rinktis-mann-whitney/kada-rinktis-mann-whitney.qmd).\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"message":false,"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":true,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"reference-location":"margin","highlight-style":"monokai","output-file":"kada-rinktis-t-testa.html"},"language":{"code-summary":"Rodyti kodą"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.262","theme":["../../html/statistikas.scss"],"anchor-sections":true,"fig-cap-location":"margin","footnotes-hover":true,"title-block-banner":true,"title":"Kaip naudoti Stjudento t-testą?","editor":"visual"},"extensions":{"book":{"multiFile":true}}}}}